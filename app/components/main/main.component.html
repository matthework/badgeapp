<!-- Header -->
<div class="docs-header">
   <h1 class=" col-md-10 col-md-offset-1" >PHL Badge App</h1>
</div>

<!-- Content -->
<div class="margin col-md-10 col-md-offset-1">

<div *ngIf="auth.authenticated()">

  <div *ngIf="checkProfile() && staff" class="row col-xs-12">

    <div class="row padding-large-vertical">
        <h2 *ngIf="auth.userProfile"><i>{{auth.userProfile.name}}, you are just logged in.</i></h2>
        <h2 *ngIf="!checkProfile()"><i>You don't have any badge yet.</i></h2>
    </div>

    <div class="row padding-large-vertical">
      <h4>Top BadgeSet: <text *ngIf="getTopStaffBS(staff.userbgroups)[0]" class="click text-blue" (click)="toBSDetail(getTopStaffBS(staff.userbgroups)[0])"><i> {{getTopStaffBS(staff.userbgroups)[1]}} ( {{getTopStaffBS(staff.userbgroups)[2]}} - {{getTopStaffBS(staff.userbgroups)[3]}} ${{getPay(getTopStaffBS(staff.userbgroups)[2],getTopStaffBS(staff.userbgroups)[3])}}K )</i></text></h4>
    </div>

    <!-- Badge container -->
    <div class=" row padding-large-vertical col-xs-12">
      <div class="header row">
        <div class="col-xs-4">Badge</div>
        <div class="col-xs-4">Badge Set</div>
        <div class="col-xs-4">Status</div>
      </div>


      <div *ngFor="let userbgroup of staff.userbgroups" class="row  div-list-item">
        <div class="click text-blue col-xs-4" (click)="toBadgeDetail(userbgroup.bid)">{{getBadgeName(userbgroup.bid)}} - {{userbgroup.level}} <text *ngIf="userbgroup.focus.length!=0"> [{{userbgroup.focus}}]</text></div>
        <div class="col-xs-4">
          <div *ngFor="let bs of findBadgeSet(staff.userbgroups,userbgroup.bid,userbgroup.level)">
            <uli class="click" (click)="toBSDetail(bs._id)">{{bs.name}}</uli>
          </div>
        </div>
        <div class="col-xs-4"><i><text class="text-green" *ngIf="userbgroup.status">{{userbgroup.status | approved_pending}}</text><text class="text-red" *ngIf="!userbgroup.status">{{userbgroup.status | approved_pending}}</text></i></div>
      </div>
      <br>
    </div>
  </div>

  <div class="row col-xs-6 form-inline" *ngIf="!checkProfile()">

    <h3><i>Please create a User profile!</i></h3>
    <br>

    <label>*FName: </label>
    <input class="input form-control" type="text" [(ngModel)]="newUser.fname" placeholder="First Name"><br>
    <br>

    <label>*LName: </label>
    <input class="input form-control" type="text" [(ngModel)]="newUser.lname" placeholder="Last Name"><br>
    <br>

    <label>Position: </label>
    <input class="input form-control" type="text" [(ngModel)]="newUser.position" placeholder="Position"><br>
    <br>

    <label>Brief: </label>
    <textarea class="textarea form-control" rows="5" type="text" [(ngModel)]="newUser.brief" placeholder="Brief"></textarea><br>
    <br>

    <button class="btn btn-big btn-danger pull-right" (click)="location.reload()">Cancel</button>
    <button class="btn btn-big btn-success pull-right" [disabled]="!newUser.fname||!newUser.lname" (click)="addNewUser()">Save</button>

  </div>

  <!-- Button group-->
  <div class="row col-xs-8">
    <div>
      <button *ngIf="checkProfile()" class="btn btn-b btn-primary" (click)="toUserDetail(auth.userProfile.email)">User Page</button><text *ngIf="checkProfile()"> You can manage your badges in user page.</text>
    </div>
    <br>
    <div *ngIf="auth.isAdmin()">
      <button class="btn btn-b btn-primary" (click)="toPerson()">Admin Page</button><text> You have <text class="text-blue">{{checkNumPending()}}</text> badge(s) request(s) pending from <text class="text-blue">{{checkPendingStaff()}}</text> staff(s).</text>
    </div>
  </div>

</div>

<br>
<div *ngIf="!auth.authenticated()">
<h1>Welcome to Badge System !</h1>
<h3><i>You are not logged in, please click 'Log in' button to login.</i></h3>
</div>

</div>

