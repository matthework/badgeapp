
<div *ngIf="auth.authenticated()">

<div *ngIf="auth.userProfile">
  <br>
  <br>
  <h2 class="text-blue"><i>{{auth.userProfile.name}}, you are just logged in.</i></h2>
  <br>
</div>

<div *ngIf="checkProfile() && staff">
<text class="text-topbs">Top BadgeSet: </text><text *ngIf="getTopStaffBS(staff.userbgroups)[0]" class="badgeset" (click)="toBSDetail(getTopStaffBS(staff.userbgroups)[0])"><i> {{getTopStaffBS(staff.userbgroups)[1]}} ( {{getTopStaffBS(staff.userbgroups)[2]}} - {{getTopStaffBS(staff.userbgroups)[3]}} ${{getPay(getTopStaffBS(staff.userbgroups)[2],getTopStaffBS(staff.userbgroups)[3])}}K )</i></text>
<br>
<br>
  <table class="table-userbgroups">
  <tr>
    <th class="th-badge">Badge</th>
    <th class="th-bs">Badge Set</th>
    <th class="th-status">Status</th>
  </tr>
  <tr *ngFor="let userbgroup of staff.userbgroups">
    <td class="badge" (click)="toBadgeDetail(userbgroup.bid)">{{getBadgeName(userbgroup.bid)}} {{userbgroup.level}} <text *ngIf="userbgroup.focus.length!=0" class="text-blue"> [{{userbgroup.focus}}]</text></td>
    <td class="td-bs">
      <div *ngFor="let bs of findBadgeSet(staff.userbgroups,userbgroup.bid,userbgroup.level)">
        <uli (click)="toBSDetail(bs._id)" class="uli-bs">{{bs.name}}</uli>
      </div>
    </td>
    <td class="td-status"><i><text class="text-approve" *ngIf="userbgroup.status">{{userbgroup.status | approved_pending}}</text><text class="text-pending2" *ngIf="!userbgroup.status">{{userbgroup.status | approved_pending}}</text></i></td>
  </tr>
</table>
</div>

<div *ngIf="!checkProfile()">
  <h3><i>You don't have any badge yet. Please create a user profile!</i></h3>
  <br>
  <h3>User Profile:</h3>
  <label>*FName: </label>
  <input class="input-fname" type="text" [(ngModel)]="newUser.fname" placeholder="First Name" /><br>
  <label>*LName: </label>
  <input class="input-lname" type="text" [(ngModel)]="newUser.lname" placeholder="Last Name" /><br>
  <label>Position: </label>
  <input class="input-pos" type="text" [(ngModel)]="newUser.position" placeholder="Position" /><br>
  <label>Brief: </label>
  <textarea class="ta-brief" type="text" [(ngModel)]="newUser.brief" placeholder="Brief"></textarea><br>
  <br>
  <button class="button-save" [disabled]="!newUser.fname||!newUser.lname" (click)="addNewUser()">Save</button>
  <button class="button-cancel" (click)="location.reload()">Cancel</button>
</div>

<button *ngIf="checkProfile()" class="button-user" (click)="toUserDetail(auth.userProfile.email)">User Page</button><text *ngIf="checkProfile()"> You can manage your badges in user page.</text><br>

<div *ngIf="auth.isAdmin()">
  <br>
  <button class="button-admin" (click)="toPerson()">Admin Page</button><text> You have <text class="text-pending">{{checkNumPending()}}</text> badge(s) request(s) pending from <text class="text-pendingStaff">{{checkPendingStaff()}}</text> staff(s).</text><br>
</div>

</div>

<br>
<div *ngIf="!auth.authenticated()">
<h1>Welcome to Badge System !</h1>
<h3><i>You are not logged in, please click 'Log in' button to login.</i></h3>
</div>


<br>
<br>
<br>